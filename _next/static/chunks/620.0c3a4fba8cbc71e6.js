"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{7631:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(5893),o=n(7294);var a=function(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0};function i(e){void 0===e&&(e={});var t=e.onResize,n=(0,o.useRef)(void 0);n.current=t;var r=e.round||Math.round,i=(0,o.useRef)(),c=(0,o.useState)({width:void 0,height:void 0}),s=c[0],u=c[1],l=(0,o.useRef)(!1);(0,o.useEffect)((function(){return function(){l.current=!0}}),[]);var f=(0,o.useRef)({width:void 0,height:void 0}),d=function(e,t){var n=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(),i=(0,o.useCallback)((function(){var o=null;n.current?o=n.current:t&&(o=t instanceof HTMLElement?t:t.current),r.current&&r.current.element===o&&r.current.reporter===i||(a.current&&(a.current(),a.current=null),r.current={reporter:i,element:o},o&&(a.current=e(o)))}),[t,e]);return(0,o.useEffect)((function(){i()}),[i]),(0,o.useCallback)((function(e){n.current=e,i()}),[i])}((0,o.useCallback)((function(t){return i.current&&i.current.box===e.box&&i.current.round===r||(i.current={box:e.box,round:r,instance:new ResizeObserver((function(t){var o=t[0],i="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",c=a(o,i,"inlineSize"),s=a(o,i,"blockSize"),d=c?r(c):void 0,v=s?r(s):void 0;if(f.current.width!==d||f.current.height!==v){var h={width:d,height:v};f.current.width=d,f.current.height=v,n.current?n.current(h):l.current||u(h)}}))}),i.current.instance.observe(t,{box:e.box}),function(){i.current&&i.current.instance.unobserve(t)}}),[e.box,r]),e.ref);return(0,o.useMemo)((function(){return{ref:d,width:s.width,height:s.height}}),[d,s?s.width:null,s?s.height:null])}var c=n(9304),s=n.n(c),u=n(4184),l=n.n(u);function f(e){var t=e.stone;return(0,r.jsxs)("div",{className:s()["stone-wrapper"],children:[(0,r.jsx)("div",{className:l()(s().stone,s()[t])}),(0,r.jsx)("div",{className:s()["stone-highlight"]})]})}function d(e){var t=e.squarestate,n=e.isLastMove,o=e.isValidMove,a=e.isLastPlaced,i=e.onclick,c=o||n||a;return(0,r.jsxs)("div",{className:s()["board-square"],onClick:i,tabIndex:0,children:["empty"!==t&&(0,r.jsx)(f,{stone:t}),c&&(0,r.jsx)("div",{className:s()["square-decoration"],style:{backgroundColor:o?"#c74d4d":a?"#2e8d59":"#3744d8"}})]})}function v(e,t){return e.findIndex((function(e){return e[0]===t[0]&&e[1]===t[1]}))}function h(e){for(var t,n=function(e){for(var t=function(t){p.push({row:e,block:t,squarestate:l[e][t],isValidMove:c&&v(f,[e,t])>=0,isLastMove:i&&v(m,[e,t])>=0,isLastPlaced:i&&0==v(m,[e,t]),onclick:function(){u(e,t)}})},n=0;n<l.length;n++)t(n)},o=e.side,a=e.gamestate,i=e.shouldShowLastMove,c=e.shouldShowValidMoves,u=e.onMove,l=a.board,f=a.validMoves,h=a.lastMove,m=(a.state,null!==(t=null===h||void 0===h?void 0:h.map((function(e){return[e.r,e.c]})))&&void 0!==t?t:[]),p=[],w=0;w<l.length;w++)n(w);return(0,r.jsx)("div",{className:s().board,style:{height:o,width:o},children:p.map((function(e){var t=e.row,n=e.block,o=e.squarestate,a=e.isValidMove,i=e.isLastMove,c=e.isLastPlaced,s=e.onclick;return(0,r.jsx)(d,{squarestate:o,isValidMove:a,isLastMove:i,isLastPlaced:c,onclick:s},"".concat(t).concat(n))}))})}var m=n(5015),p=n(155);function w(e){var t=e.muted,n=e.onClick,o=t?p.azs:p.JKK;return(0,r.jsxs)("button",{className:l()(s()["mute-button"],s().springy),onClick:n,children:[(0,r.jsx)(o,{style:{marginRight:"0.5em"}})," FARTS"]})}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){c=!0,o=s}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=e.gamestate,n=e.setShouldShowLastMove,o=e.setShouldShowValidMoves,a=e.shouldShowLastMove,i=e.shouldShowValidMoves,c=e.newGame,u=e.pass,l=e.muted,f=e.toggleMute;return(0,r.jsxs)("div",{className:s()["side-panel"],children:[(0,r.jsxs)("div",{className:s()["control-panel"],children:[(0,r.jsx)(j,{gamestate:t,newGame:c}),(0,r.jsx)(S,{title:"".concat(i?"hide":"show"," legal moves"),onclick:o}),(0,r.jsx)(S,{title:"".concat(a?"hide":"show"," last move"),onclick:n}),(0,r.jsx)(S,{title:"pass",onclick:function(){"in-progress"===t.state&&u()}})]}),(0,r.jsxs)("div",{className:s()["side-info"],children:[(0,r.jsx)(x,{gamestate:t}),(0,r.jsx)(M,{gamestate:t}),(0,r.jsx)(w,{muted:l,onClick:f})]})]})}function x(e){var t=e.gamestate;return(0,r.jsx)("div",{className:s().status,children:function(){switch(t.state){case"tie":return"TIE";case"winner-black":return"BLACK WINS!";case"winner-white":return"WHITE WINS!";case"in-progress":if(t.lastMove){var e=(0,m.WT)(t.currentStone).toUpperCase(),n=b(t.lastMove,1)[0];if(n){var r=["A","B","C","D","E","F","G","H"][n.c],o=8-n.r;return"".concat(e," TO ").concat(r).concat(o)}return"".concat(e," PASSED")}default:return"".concat(t.currentStone.toUpperCase(),"'S TURN")}}()})}function j(e){var t=(0,o.useCallback)((function(){e.gamestate.lastMove&&"in-progress"===e.gamestate.state&&!window.confirm("Are you sure you want to end the current game?")||e.newGame()}),[e]);return(0,r.jsx)(S,{title:"new game",onclick:t})}function S(e){var t=e.title,n=e.onclick;return(0,r.jsx)("button",{className:l()(s().control,s().springy),type:"button",onClick:n,children:(0,r.jsx)("div",{className:s()["control-text"],children:t})})}function M(e){var t=e.gamestate,n=t.blackScore,a=t.whiteScore,i=(0,o.useRef)(null),c=(0,o.useState)(0),u=(c[0],c[1]),f=e.gamestate.currentStone;return(0,o.useEffect)((function(){i.current&&u(i.current.getBoundingClientRect().width)})),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:s()["score-display-container"],ref:i,children:[(0,r.jsxs)("div",{className:l()(s()["score-item"],s()["control-text"],s().black,"black"==f&&s().turn),children:[(0,r.jsx)("div",{className:s()["score-item-icon"],children:" "}),(0,r.jsxs)("div",{children:["Black: ",n]})]}),(0,r.jsxs)("div",{className:l()(s()["score-item"],s()["control-text"],s().white,"white"==f&&s().turn),children:[(0,r.jsx)("div",{className:s()["score-item-icon"],children:" "}),(0,r.jsxs)("div",{children:["White: ",a]})]})]})})}function k(e){var t=(0,o.useRef)(null),n=i({ref:t}),a=(0,o.useState)(),c=a[0],u=a[1],l=e.gamestate,f=e.onMove,d=e.onNewGame,v=e.onPass,m=e.muted,p=e.toggleMute,w=(l.state,(0,o.useState)(!1)),y=w[0],b=w[1],x=(0,o.useState)(!1),j=x[0],S=x[1];(0,o.useEffect)((function(){if(n.width&&n.height){var e=n?Math.min(n.width,n.height):0;u(.9*e)}}),[n]);return(0,r.jsxs)("div",{className:s()["game-table"],ref:t,children:[(0,r.jsx)("div",{className:s().spacer}),(0,r.jsx)(g,{gamestate:l,setShouldShowLastMove:function(){b((function(e){return!e}))},setShouldShowValidMoves:function(){S((function(e){return!e}))},shouldShowLastMove:y,shouldShowValidMoves:j,side:c,newGame:d,pass:v,muted:m,toggleMute:p}),(0,r.jsx)("div",{className:s()["board-wrapper"],children:(0,r.jsx)(h,{gamestate:l,side:null!==c&&void 0!==c?c:0,shouldShowLastMove:y,shouldShowValidMoves:j,onMove:f})}),(0,r.jsx)("div",{className:s().spacer})]})}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function O(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){c=!0,o=s}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var P={burp1:"/Burp 1.wav",fart1:"/Fart 1.wav",fart2:"/Fart 2.wav",fart3:"/Fart 3.wav",fart4:"/Fart 4.wav",fart5:"/Fart 5.wav",fart6:"/Fart 6.wav",fart7:"/Fart 7.wav",fart8:"/Fart 8.wav",fart9:"/Fart 9.wav",fart10:"/Fart 10.wav"},z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(n,e);var t=A(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).sounds=(0,o.createRef)(),r}var a=n.prototype;return a.componentDidUpdate=function(e){var t=e.gameState.lastMove,n=this.props.gameState.lastMove;this.didMove(t,n)&&this.playMove()},a.didMove=function(e,t){return!(!t||!t.length)&&(!e||!e.length||t[0].s!==e[0].s)},a.playMove=function(){var e=Object.keys(P),t=Math.floor(Math.random()*e.length);this.play(e[t])},a.play=function(e){var t;if(!this.props.muted){var n=null===(t=this.sounds.current)||void 0===t?void 0:t.querySelector("#".concat(e));n&&(n.currentTime=0,n.play())}},a.render=function(){return(0,r.jsx)("div",{ref:this.sounds,style:{display:"none"},children:Object.entries(P).map((function(e,t){var n=R(e,2),o=n[0],a=n[1];return(0,r.jsx)("audio",{id:o,src:a},t)}))})},n}(o.Component);function I(e){var t=e.gameState.lastMove;return(0,o.useEffect)((function(){if(t){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t]),null}var F=n(9903);function _(){var e=(0,m.G$)(),t=(0,m.QV)().muted,n=(0,F.I0)(),a=(0,o.useCallback)((function(){return n((0,m.wo)())}),[n]),i=(0,o.useCallback)((function(e,t){return n((0,m.pB)({r:e,c:t}))}),[n]),c=(0,o.useCallback)((function(){return n((0,m.Xc)())}),[n]),s=(0,o.useCallback)((function(){return n((0,m.$t)())}),[n]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{gameState:e}),(0,r.jsx)(k,{gamestate:e,onNewGame:a,onMove:i,onPass:c,muted:t,toggleMute:s}),(0,r.jsx)(z,{gameState:e,muted:t})]})}},8357:function(e,t,n){n.d(t,{w_:function(){return u}});var r=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(o),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function s(e){return e&&e.map((function(e,t){return r.createElement(e.tag,i({key:t},e.attr),s(e.child))}))}function u(e){return function(t){return r.createElement(l,i({attr:i({},e.attr)},t),s(e.child))}}function l(e){var t=function(t){var n,o=e.attr,a=e.size,s=e.title,u=c(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:n,style:i(i({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(o)}}}]);