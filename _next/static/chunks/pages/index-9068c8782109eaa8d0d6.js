(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8315:function(t,e,r){"use strict";r.d(e,{WT:function(){return u},x4:function(){return l}});var n=r(7329),i=r(4699),o=r(6610),c=r(5991),s=r(6156);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var u=function(t){return"black"===t?"white":"black"},h=function(){function t(){(0,o.Z)(this,t),(0,s.Z)(this,"size",8),(0,s.Z)(this,"squares",void 0),this.squares=this.empty()}return(0,c.Z)(t,[{key:"reset",value:function(){this.squares=this.empty()}},{key:"move",value:function(t,e,r){var n=this,o=[];if(this.forEachNeighbor(e,r,(function(c,s,a){n.getFlipsInDirection(t,e,r,c,s).forEach((function(t){var e=(0,i.Z)(t,2),r=e[0],c=e[1],s=u(n.squares[r][c]);n.squares[r][c]=s,o.push({r:r,c:c,s:s})}))})),o.length>0)return this.squares[e][r]=t,[{r:e,c:r,s:t}].concat(o);throw Error("invalid move: ".concat(t,", r ").concat(e,", c ").concat(r))}},{key:"getFlipsInDirection",value:function(t,e,r,n,i){var o,c=u(t),s=[];for(e+=n,r+=i;(o=this.lookup(e,r))===c;)s.push([e,r]),e+=n,r+=i;return o===t?s:[]}},{key:"isValidMove",value:function(t,e,r){var n=this;if("empty"!==this.squares[e][r])return!1;var i=!1;return this.forEachNeighbor(e,r,(function(o,c){n.getFlipsInDirection(t,e,r,o,c).length>0&&(i=!0)})),i}},{key:"lookup",value:function(t,e){if(t>=0&&t<this.size&&e>=0&&e<this.size)return this.squares[t][e]}},{key:"forEachNeighbor",value:function(t,e,r){var n,i,o;for(n=-1;n<2;n++)for(i=-1;i<2;i++)0===n&&0===i||(o=this.lookup(t+i,e+n))&&r(i,n,o)}},{key:"forEachSquare",value:function(t){this.squares.forEach((function(e,r){return e.forEach((function(e,n){return t(r,n,e)}))}))}},{key:"toString",value:function(){return["  ".concat(Array(this.size).fill(void 0).map((function(t,e){return e})).join(" "))].concat((0,n.Z)(this.squares.map((function(t,e){return"".concat(e," ").concat(t.map((function(t){switch(t){case"black":return"B";case"white":return"W";case"empty":return"-"}})).join(" "))})))).join("\n")}},{key:"empty",value:function(){var t=this;return Array(this.size).fill(void 0).map((function(){return Array(t.size).fill("empty")}))}}]),t}(),l=function(){function t(){(0,o.Z)(this,t),(0,s.Z)(this,"board",new h),(0,s.Z)(this,"currentStone","black"),(0,s.Z)(this,"validMoves",[]),(0,s.Z)(this,"blackScore",0),(0,s.Z)(this,"whiteScore",0),(0,s.Z)(this,"lastMove",void 0)}return(0,c.Z)(t,[{key:"toJSON",value:function(){var t;return{blackScore:this.blackScore,whiteScore:this.whiteScore,board:this.board.squares.map((function(t){return(0,n.Z)(t)})),currentStone:this.currentStone,validMoves:this.validMoves.map((function(t){return(0,n.Z)(t)})),lastMove:null===(t=this.lastMove)||void 0===t?void 0:t.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){(0,s.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t)})),state:this.state}}},{key:"newGame",value:function(t){this.board.reset();var e=this.board.squares;e[3][3]="black",e[3][4]="white",e[4][3]="white",e[4][4]="black",this.lastMove=void 0,this.currentStone=t,this.updateScore(),this.updateValidMoves()}},{key:"pass",value:function(){this.lastMove=[],this.currentStone=u(this.currentStone),this.updateValidMoves()}},{key:"move",value:function(t,e){this.lastMove=this.board.move(this.currentStone,t,e),this.currentStone=u(this.currentStone),this.updateScore(),this.updateValidMoves()}},{key:"isValidMove",value:function(t,e){return this.board.isValidMove(this.currentStone,t,e)}},{key:"updateScore",value:function(){var t=this;this.blackScore=0,this.whiteScore=0,this.board.forEachSquare((function(e,r,n){switch(n){case"black":t.blackScore++;break;case"white":t.whiteScore++}}))}},{key:"updateValidMoves",value:function(){var t=this;this.validMoves=[],this.board.forEachSquare((function(e,r,n){t.board.isValidMove(t.currentStone,e,r)&&t.validMoves.push([e,r])}))}},{key:"toString",value:function(){return"\n    blackScore: ".concat(this.blackScore,"\n    whiteScore: ").concat(this.whiteScore,"\n    currentStone: ").concat(this.currentStone,"\n    validMoves: ").concat(JSON.stringify(this.validMoves),"\n    board:\n").concat(this.board.toString(),"\n    ")}},{key:"state",get:function(){var t=this.blackScore+this.whiteScore,e=this.board.size*this.board.size;return 0===t?"empty":t<e?"in-progress":this.blackScore<this.whiteScore?"winner-white":this.blackScore>this.whiteScore?"winner-black":"tie"}}]),t}()},2918:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var n=r(5893),i=r(5152),o=r(574),c=r(709),s=r(4991),a=r(7675);r(7294);function u(){return(0,n.jsxs)("div",{className:"top-bar",children:[(0,n.jsx)(l,{}),(0,n.jsxs)("div",{className:"top-link-container",children:[(0,n.jsx)(h,{href:"https://en.wikipedia.org/wiki/Reversi#Rules",children:"HOW TO PLAY"}),(0,n.jsx)(h,{href:"https://github.com/alexjball/reversi",children:"ABOUT"}),(0,n.jsx)(h,{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",children:"MORE GAMES"})]})]})}var h=function(t){var e=t.href,r=t.children;return(0,n.jsx)("a",{className:"link springy",target:"_blank",href:e,rel:"noreferrer",children:r})};function l(){return(0,n.jsxs)("div",{className:"logo",children:["RE",(0,n.jsx)("span",{children:"VER"}),"SI"]})}var f=r(9008),v=(0,i.default)((function(){return Promise.all([r.e(260),r.e(350)]).then(r.bind(r,6337))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6337]},modules:["index.tsx -> ../components/GameContainer"]}});function d(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.default,{children:(0,n.jsx)("title",{children:"Reversi"})}),(0,n.jsxs)(a.zt,{store:(0,o.xC)({reducer:{audio:c.ZP,game:s.ZP}}),children:[(0,n.jsx)(u,{}),(0,n.jsx)(v,{})]})]})}},709:function(t,e,r){"use strict";r.d(e,{QV:function(){return c},$t:function(){return s}});var n=r(574),i=r(7675),o=(0,n.oM)({name:"audio",initialState:{muted:!0},reducers:{toggleMute:function(t){t.muted=!t.muted}}}),c=function(){return(0,i.v9)((function(t){return t.audio}),i.wU)},s=o.actions.toggleMute;e.ZP=o.reducer},4991:function(t,e,r){"use strict";r.d(e,{G$:function(){return f},pB:function(){return d},Xc:function(){return p},wo:function(){return b}});var n=r(6156),i=r(574),o=r(7675),c=r(8315);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u=new c.x4;u.newGame("black");var h=a(a({},u.toJSON()),{},{startingStone:"white"}),l=(0,i.oM)({name:"game",initialState:h,reducers:{move:function(t,e){var r=e.payload,n=r.r,i=r.c;if(u.isValidMove(n,i))return u.move(n,i),a(a({},t),u.toJSON())},pass:function(t){u.pass(),t.currentStone=u.currentStone,t.lastMove=u.lastMove,t.validMoves=u.validMoves},newGame:function(t){return u.newGame(t.startingStone),a(a({},t),{},{startingStone:(0,c.WT)(t.startingStone)},u.toJSON())}}}),f=function(){return(0,o.v9)((function(t){return t.game}),o.wU)},v=l.actions,d=v.move,p=v.pass,b=v.newGame;e.ZP=l.reducer},5301:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2918)}])}},function(t){t.O(0,[774,338,888,179],(function(){return e=5301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);