(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{7889:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reversi",function(){return r(963)}])},5015:function(t,e,r){"use strict";r.d(e,{MT:function(){return q},pB:function(){return E},wo:function(){return N},WT:function(){return p},Xc:function(){return x},$t:function(){return c},QV:function(){return a},G$:function(){return M}});var n=r(5295),i=r(9903),o=(0,n.oM)({name:"audio",initialState:{muted:!0},reducers:{toggleMute:function(t){t.muted=!t.muted}}}),a=function(){return(0,i.v9)((function(t){return t.audio}),i.wU)},c=o.actions.toggleMute,u=o.reducer;function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(u){c=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"===typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}var p=function(t){return"black"===t?"white":"black"},m=function(){function t(){l(this,t),this.size=8,this.squares=this.empty()}var e=t.prototype;return e.reset=function(){this.squares=this.empty()},e.move=function(t,e,r){var n=this,i=[];if(this.forEachNeighbor(e,r,(function(o,a,c){var u=n;n.getFlipsInDirection(t,e,r,o,a).forEach((function(t){var e=d(t,2),r=e[0],n=e[1],o=p(u.squares[r][n]);u.squares[r][n]=o,i.push({r:r,c:n,s:o})}))})),i.length>0)return this.squares[e][r]=t,[{r:e,c:r,s:t}].concat(v(i));throw Error("invalid move: ".concat(t,", r ").concat(e,", c ").concat(r))},e.getFlipsInDirection=function(t,e,r,n,i){var o,a=p(t),c=[];for(e+=n,r+=i;(o=this.lookup(e,r))===a;)c.push([e,r]),e+=n,r+=i;return o===t?c:[]},e.isValidMove=function(t,e,r){var n=this;if("empty"!==this.squares[e][r])return!1;var i=!1;return this.forEachNeighbor(e,r,(function(o,a){n.getFlipsInDirection(t,e,r,o,a).length>0&&(i=!0)})),i},e.lookup=function(t,e){if(t>=0&&t<this.size&&e>=0&&e<this.size)return this.squares[t][e]},e.forEachNeighbor=function(t,e,r){var n,i,o;for(n=-1;n<2;n++)for(i=-1;i<2;i++)0===n&&0===i||(o=this.lookup(t+i,e+n))&&r(i,n,o)},e.forEachSquare=function(t){this.squares.forEach((function(e,r){return e.forEach((function(e,n){return t(r,n,e)}))}))},e.toString=function(){return["  ".concat(Array(this.size).fill(void 0).map((function(t,e){return e})).join(" "))].concat(v(this.squares.map((function(t,e){return"".concat(e," ").concat(t.map((function(t){switch(t){case"black":return"B";case"white":return"W";case"empty":return"-"}})).join(" "))})))).join("\n")},e.empty=function(){var t=this;return Array(this.size).fill(void 0).map((function(){return Array(t.size).fill("empty")}))},t}(),S=function(){function t(){l(this,t),this.board=new m,this.currentStone="black",this.validMoves=[],this.blackScore=0,this.whiteScore=0}var e,r,n,i=t.prototype;return i.toJSON=function(){var t;return{blackScore:this.blackScore,whiteScore:this.whiteScore,board:this.board.squares.map((function(t){return v(t)})),currentStone:this.currentStone,validMoves:this.validMoves.map((function(t){return v(t)})),lastMove:null===(t=this.lastMove)||void 0===t?void 0:t.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){h(t,e,r[e])}))}return t}({},t)})),state:this.state}},i.newGame=function(t){this.board.reset();var e=this.board.squares;e[3][3]="black",e[3][4]="white",e[4][3]="white",e[4][4]="black",this.lastMove=void 0,this.currentStone=t,this.updateScore(),this.updateValidMoves()},i.pass=function(){this.lastMove=[],this.currentStone=p(this.currentStone),this.updateValidMoves()},i.move=function(t,e){this.lastMove=this.board.move(this.currentStone,t,e),this.currentStone=p(this.currentStone),this.updateScore(),this.updateValidMoves()},i.isValidMove=function(t,e){return this.board.isValidMove(this.currentStone,t,e)},i.updateScore=function(){var t=this;this.blackScore=0,this.whiteScore=0,this.board.forEachSquare((function(e,r,n){switch(n){case"black":t.blackScore++;break;case"white":t.whiteScore++}}))},i.updateValidMoves=function(){var t=this;this.validMoves=[],this.board.forEachSquare((function(e,r,n){t.board.isValidMove(t.currentStone,e,r)&&t.validMoves.push([e,r])}))},i.toString=function(){return"\n    blackScore: ".concat(this.blackScore,"\n    whiteScore: ").concat(this.whiteScore,"\n    currentStone: ").concat(this.currentStone,"\n    validMoves: ").concat(JSON.stringify(this.validMoves),"\n    board:\n").concat(this.board.toString(),"\n    ")},e=t,(r=[{key:"state",get:function(){var t=this.blackScore+this.whiteScore,e=this.board.size*this.board.size;return 0===t?"empty":t<e?"in-progress":this.blackScore<this.whiteScore?"winner-white":this.blackScore>this.whiteScore?"winner-black":"tie"}}])&&f(e.prototype,r),n&&f(e,n),t}();function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){y(t,e,r[e])}))}return t}var g=new S;g.newGame("black");var k=w({},g.toJSON(),{startingStone:"white"}),j=(0,n.oM)({name:"game",initialState:k,reducers:{move:function(t,e){var r=e.payload,n=r.r,i=r.c;if(g.isValidMove(n,i))return g.move(n,i),w({},t,g.toJSON())},pass:function(t){g.pass(),t.currentStone=g.currentStone,t.lastMove=g.lastMove,t.validMoves=g.validMoves},newGame:function(t){return g.newGame(t.startingStone),w({},t,{startingStone:p(t.startingStone)},g.toJSON())}}}),M=function(){return(0,i.v9)((function(t){return t.game}),i.wU)},O=j.actions,E=O.move,x=O.pass,N=O.newGame,A=j.reducer,q=function(){return(0,n.xC)({reducer:{audio:u,game:A}})}},963:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var n=r(5893),i=r(9008),o=r(9903),a=r(5152),c=r(1664),u=r.n(c);function s(){return(0,n.jsxs)("div",{className:"top-bar",children:[(0,n.jsx)(f,{}),(0,n.jsxs)("div",{className:"top-link-container",children:[(0,n.jsx)(l,{href:"https://en.wikipedia.org/wiki/Reversi#Rules",children:"HOW TO PLAY"}),(0,n.jsx)(l,{href:"https://github.com/alexjball/reversi",children:"ABOUT"}),(0,n.jsx)(u(),{href:"/",children:(0,n.jsx)("a",{className:"link springy",children:"MORE GAMES"})})]})]})}var l=function(t){var e=t.href,r=t.children;return(0,n.jsx)("a",{className:"link springy",target:"_blank",href:e,rel:"noreferrer",children:r})};function f(){return(0,n.jsxs)("div",{className:"logo",children:["RE",(0,n.jsx)("span",{children:"VER"}),"SI"]})}var h=(0,a.default)((function(){return Promise.all([r.e(260),r.e(620)]).then(r.bind(r,7631))}),{loadableGenerated:{webpack:function(){return[7631]}},ssr:!1}),d=r(5015);function v(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{children:(0,n.jsx)("title",{children:"Reversi"})}),(0,n.jsxs)(o.zt,{store:(0,d.MT)(),children:[(0,n.jsx)(s,{}),(0,n.jsx)(h,{})]})]})}}},function(t){t.O(0,[949,774,888,179],(function(){return e=7889,t(t.s=e);var e}));var e=t.O();_N_E=e}]);