(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{7889:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reversi",function(){return t(963)}])},5015:function(e,r,t){"use strict";t.d(r,{MT:function(){return N},pB:function(){return O},wo:function(){return x},WT:function(){return b},Xc:function(){return E},$t:function(){return s},QV:function(){return a},G$:function(){return j}});var n=t(5295),i=t(9903),o=(0,n.oM)({name:"audio",initialState:{muted:!0},reducers:{toggleMute:function(e){e.muted=!e.muted}}}),a=function(){return(0,i.v9)((function(e){return e.audio}),i.wU)},s=o.actions.toggleMute,c=o.reducer;function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}}(e,r)||p(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){if(e){if("string"===typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}var b=function(e){return"black"===e?"white":"black"},_=function(){function e(){l(this,e),this.size=8,this.squares=this.empty()}var r=e.prototype;return r.reset=function(){this.squares=this.empty()},r.move=function(e,r,t){var n=this,i=[];if(this.forEachNeighbor(r,t,(function(o,a,s){var c=n;n.getFlipsInDirection(e,r,t,o,a).forEach((function(e){var r=v(e,2),t=r[0],n=r[1],o=b(c.squares[t][n]);c.squares[t][n]=o,i.push({r:t,c:n,s:o})}))})),i.length>0)return this.squares[r][t]=e,[{r:r,c:t,s:e}].concat(d(i));throw Error("invalid move: ".concat(e,", r ").concat(r,", c ").concat(t))},r.getFlipsInDirection=function(e,r,t,n,i){var o,a=b(e),s=[];for(r+=n,t+=i;(o=this.lookup(r,t))===a;)s.push([r,t]),r+=n,t+=i;return o===e?s:[]},r.isValidMove=function(e,r,t){var n=this;if("empty"!==this.squares[r][t])return!1;var i=!1;return this.forEachNeighbor(r,t,(function(o,a){n.getFlipsInDirection(e,r,t,o,a).length>0&&(i=!0)})),i},r.lookup=function(e,r){if(e>=0&&e<this.size&&r>=0&&r<this.size)return this.squares[e][r]},r.forEachNeighbor=function(e,r,t){var n,i,o;for(n=-1;n<2;n++)for(i=-1;i<2;i++)0===n&&0===i||(o=this.lookup(e+i,r+n))&&t(i,n,o)},r.forEachSquare=function(e){this.squares.forEach((function(r,t){return r.forEach((function(r,n){return e(t,n,r)}))}))},r.toString=function(){return["  ".concat(Array(this.size).fill(void 0).map((function(e,r){return r})).join(" "))].concat(d(this.squares.map((function(e,r){return"".concat(r," ").concat(e.map((function(e){switch(e){case"black":return"B";case"white":return"W";case"empty":return"-"}})).join(" "))})))).join("\n")},r.empty=function(){var e=this;return Array(this.size).fill(void 0).map((function(){return Array(e.size).fill("empty")}))},e}(),m=function(){function e(){l(this,e),this.board=new _,this.currentStone="black",this.validMoves=[],this.blackScore=0,this.whiteScore=0}var r,t,n,i=e.prototype;return i.toJSON=function(){var e;return{blackScore:this.blackScore,whiteScore:this.whiteScore,board:this.board.squares.map((function(e){return d(e)})),currentStone:this.currentStone,validMoves:this.validMoves.map((function(e){return d(e)})),lastMove:null===(e=this.lastMove)||void 0===e?void 0:e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){f(e,r,t[r])}))}return e}({},e)})),state:this.state}},i.newGame=function(e){this.board.reset();var r=this.board.squares;r[3][3]="black",r[3][4]="white",r[4][3]="white",r[4][4]="black",this.lastMove=void 0,this.currentStone=e,this.updateScore(),this.updateValidMoves()},i.pass=function(){this.lastMove=[],this.currentStone=b(this.currentStone),this.updateValidMoves()},i.move=function(e,r){this.lastMove=this.board.move(this.currentStone,e,r),this.currentStone=b(this.currentStone),this.updateScore(),this.updateValidMoves()},i.isValidMove=function(e,r){return this.board.isValidMove(this.currentStone,e,r)},i.updateScore=function(){var e=this;this.blackScore=0,this.whiteScore=0,this.board.forEachSquare((function(r,t,n){switch(n){case"black":e.blackScore++;break;case"white":e.whiteScore++}}))},i.updateValidMoves=function(){var e=this;this.validMoves=[],this.board.forEachSquare((function(r,t,n){e.board.isValidMove(e.currentStone,r,t)&&e.validMoves.push([r,t])}))},i.toString=function(){return"\n    blackScore: ".concat(this.blackScore,"\n    whiteScore: ").concat(this.whiteScore,"\n    currentStone: ").concat(this.currentStone,"\n    validMoves: ").concat(JSON.stringify(this.validMoves),"\n    board:\n").concat(this.board.toString(),"\n    ")},r=e,(t=[{key:"state",get:function(){var e=this.blackScore+this.whiteScore,r=this.board.size*this.board.size;return 0===e?"empty":e<r?"in-progress":this.blackScore<this.whiteScore?"winner-white":this.blackScore>this.whiteScore?"winner-black":"tie"}}])&&h(r.prototype,t),n&&h(r,n),e}();function S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){S(e,r,t[r])}))}return e}var w=new m;w.newGame("black");var g=y({},w.toJSON(),{startingStone:"white"}),k=(0,n.oM)({name:"game",initialState:g,reducers:{move:function(e,r){var t=r.payload,n=t.r,i=t.c;if(w.isValidMove(n,i))return w.move(n,i),y({},e,w.toJSON())},pass:function(e){w.pass(),e.currentStone=w.currentStone,e.lastMove=w.lastMove,e.validMoves=w.validMoves},newGame:function(e){return w.newGame(e.startingStone),y({},e,{startingStone:b(e.startingStone)},w.toJSON())}}}),j=function(){return(0,i.v9)((function(e){return e.game}),i.wU)},M=k.actions,O=M.move,E=M.pass,x=M.newGame,q=k.reducer,N=function(){return(0,n.xC)({reducer:{audio:c,game:q}})}},963:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var n=t(5893),i=t(9008),o=t(9903),a=t(5152),s=t(4184),c=t.n(s),u=t(1664),l=t.n(u),h=t(9304),f=t.n(h);function v(){return(0,n.jsxs)("div",{className:f()["top-bar"],children:[(0,n.jsx)(p,{}),(0,n.jsxs)("div",{className:f()["top-link-container"],children:[(0,n.jsx)(d,{href:"https://en.wikipedia.org/wiki/Reversi#Rules",children:"HOW TO PLAY"}),(0,n.jsx)(d,{href:"https://github.com/alexjball/reversi",children:"ABOUT"}),(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)("a",{className:c()(f().link,f().springy),children:"MORE GAMES"})})]})]})}var d=function(e){var r=e.href,t=e.children;return(0,n.jsx)("a",{className:c()(f().link,f().springy),target:"_blank",href:r,rel:"noreferrer",children:t})};function p(){return(0,n.jsxs)("div",{className:f().logo,children:["RE",(0,n.jsx)("span",{children:"VER"}),"SI"]})}var b=(0,a.default)((function(){return Promise.all([t.e(260),t.e(620)]).then(t.bind(t,7631))}),{loadableGenerated:{webpack:function(){return[7631]}},ssr:!1}),_=t(5015);function m(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{children:(0,n.jsx)("title",{children:"Reversi"})}),(0,n.jsxs)(o.zt,{store:(0,_.MT)(),children:[(0,n.jsx)(v,{}),(0,n.jsx)(b,{})]})]})}},9304:function(e){e.exports={"game-table":"reversi_game-table__ffIFT","board-wrapper":"reversi_board-wrapper__ANg_Y",board:"reversi_board__h__fW","square-decoration":"reversi_square-decoration__0c2Bp","board-square":"reversi_board-square__GzhFp","side-panel":"reversi_side-panel__dPhwy",spacer:"reversi_spacer__UFGyR","control-panel":"reversi_control-panel__TWFu8","side-info":"reversi_side-info__orFbs",control:"reversi_control__Tev_5","control-text":"reversi_control-text__vnmTh","mute-button":"reversi_mute-button__vwBKG",springy:"reversi_springy__Uhu9C","top-bar":"reversi_top-bar__hr_B3",logo:"reversi_logo__bsd33",link:"reversi_link__l4TCX","top-link-container":"reversi_top-link-container__X3X4t","score-display-container":"reversi_score-display-container__jihMZ","score-item":"reversi_score-item__lS5_r",turn:"reversi_turn__Zb03b","score-item-icon":"reversi_score-item-icon__7oSuO",black:"reversi_black__0rfDe",white:"reversi_white___QYzF",status:"reversi_status__Cq7PQ","stone-wrapper":"reversi_stone-wrapper__cuu40",stone:"reversi_stone__O8FKq"}}},function(e){e.O(0,[911,774,888,179],(function(){return r=7889,e(e.s=r);var r}));var r=e.O();_N_E=r}]);