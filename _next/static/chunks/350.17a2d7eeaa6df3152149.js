(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{6337:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(5893),o=n(7294);var a=function(e){void 0===e&&(e={});var t=e.onResize,n=(0,o.useRef)(void 0);n.current=t;var r=(0,o.useRef)(),a=(0,o.useState)({width:void 0,height:void 0}),s=a[0],c=a[1],i=(0,o.useRef)(!1);(0,o.useEffect)((function(){return function(){i.current=!0}}),[]);var u=(0,o.useRef)({width:void 0,height:void 0}),l=function(e,t){var n,r=null,a=(0,o.useRef)(null),s=(0,o.useRef)(null),c=(0,o.useCallback)((function(e){s.current=e,l()}),[]),i=(0,o.useRef)(null),u=(0,o.useRef)(),l=function(){var n=null;s.current?n=s.current:a.current?n=a.current:t instanceof HTMLElement&&(n=t),i.current!==n&&(u.current&&(u.current(),u.current=null),i.current=n,n&&(u.current=e(n)))};return!t||t instanceof HTMLElement||(r=t),(0,o.useEffect)((function(){r&&(a.current=r.current),l()}),[r,null==(n=r)?void 0:n.current,t]),c}((function(e){return r.current||(r.current=new ResizeObserver((function(e){if(Array.isArray(e)&&e.length){var t=e[0],r=Math.round(t.contentRect.width),o=Math.round(t.contentRect.height);if(u.current.width!==r||u.current.height!==o){var a={width:r,height:o};n.current?n.current(a):(u.current.width=r,u.current.height=o,i.current||c(a))}}}))),r.current.observe(e),function(){r.current&&r.current.unobserve(e)}}),e.ref);return(0,o.useMemo)((function(){return{ref:l,width:s.width,height:s.height}}),[l,s?s.width:null,s?s.height:null])};function s(e){var t=e.stone;return(0,r.jsxs)("div",{className:"stone-wrapper",children:[(0,r.jsx)("div",{className:"stone ".concat(t)}),(0,r.jsx)("div",{className:"stone-highlight"})]})}function c(e){var t=e.squarestate,n=e.isLastMove,o=e.isValidMove,a=e.isLastPlaced,c=e.onclick,i=o||n||a;return(0,r.jsxs)("div",{className:"board-square",onClick:c,tabIndex:0,children:["empty"!==t&&(0,r.jsx)(s,{stone:t}),i&&(0,r.jsx)("div",{className:"square-decoration",style:{backgroundColor:o?"#c74d4d":a?"#2e8d59":"#3744d8"}})]})}function i(e,t){return e.findIndex((function(e){return e[0]===t[0]&&e[1]===t[1]}))}function u(e){for(var t,n=e.side,o=e.gamestate,a=e.shouldShowLastMove,s=e.shouldShowValidMoves,u=e.onMove,l=o.board,f=o.validMoves,d=o.lastMove,v=(o.state,null!==(t=null===d||void 0===d?void 0:d.map((function(e){return[e.r,e.c]})))&&void 0!==t?t:[]),h=[],m=function(e){for(var t=function(t){h.push({row:e,block:t,squarestate:l[e][t],isValidMove:s&&i(f,[e,t])>=0,isLastMove:a&&i(v,[e,t])>=0,isLastPlaced:a&&0==i(v,[e,t]),onclick:function(){u(e,t)}})},n=0;n<l.length;n++)t(n)},p=0;p<l.length;p++)m(p);return(0,r.jsx)("div",{className:"board",style:{height:n,width:n},children:h.map((function(e){var t=e.row,n=e.block,o=e.squarestate,a=e.isValidMove,s=e.isLastMove,i=e.isLastPlaced,u=e.onclick;return(0,r.jsx)(c,{squarestate:o,isValidMove:a,isLastMove:s,isLastPlaced:i,onclick:u},"".concat(t).concat(n))}))})}var l=n(4699),f=n(8315),d=n(155);function v(e){var t=e.muted,n=e.onClick,o=t?d.azs:d.JKK;return(0,r.jsxs)("button",{className:"mute-button springy",onClick:n,children:[(0,r.jsx)(o,{style:{marginRight:"0.5em"}})," FARTS"]})}function h(e){var t=e.gamestate,n=e.setShouldShowLastMove,o=e.setShouldShowValidMoves,a=e.shouldShowLastMove,s=e.shouldShowValidMoves,c=e.newGame,i=e.pass,u=e.muted,l=e.toggleMute;return(0,r.jsxs)("div",{className:"side-panel",children:[(0,r.jsxs)("div",{className:"control-panel",children:[(0,r.jsx)(p,{gamestate:t,newGame:c}),(0,r.jsx)(w,{title:"".concat(s?"hide":"show"," legal moves"),onclick:o}),(0,r.jsx)(w,{title:"".concat(a?"hide":"show"," last move"),onclick:n}),(0,r.jsx)(w,{title:"pass",onclick:function(){"in-progress"===t.state&&i()}})]}),(0,r.jsxs)("div",{className:"side-info",children:[(0,r.jsx)(m,{gamestate:t}),(0,r.jsx)(g,{gamestate:t}),(0,r.jsx)(v,{muted:u,onClick:l})]})]})}function m(e){var t=e.gamestate;return(0,r.jsx)("div",{className:"status",children:function(){switch(t.state){case"tie":return"TIE";case"winner-black":return"BLACK WINS!";case"winner-white":return"WHITE WINS!";case"in-progress":if(t.lastMove){var e=(0,f.WT)(t.currentStone).toUpperCase(),n=(0,l.Z)(t.lastMove,1)[0];if(n){var r=["A","B","C","D","E","F","G","H"][n.c],o=8-n.r;return"".concat(e," TO ").concat(r).concat(o)}return"".concat(e," PASSED")}default:return"".concat(t.currentStone.toUpperCase(),"'S TURN")}}()})}function p(e){var t=(0,o.useCallback)((function(){e.gamestate.lastMove&&"in-progress"===e.gamestate.state&&!window.confirm("Are you sure you want to end the current game?")||e.newGame()}),[e]);return(0,r.jsx)(w,{title:"new game",onclick:t})}function w(e){var t=e.title,n=e.onclick;return(0,r.jsx)("button",{className:"control springy",type:"button",onClick:n,children:(0,r.jsx)("div",{className:"control-text",children:t})})}function g(e){var t=e.gamestate,n=t.blackScore,a=t.whiteScore,s=(0,o.useRef)(null),c=(0,o.useState)(0),i=(c[0],c[1]),u=e.gamestate.currentStone;return(0,o.useEffect)((function(){s.current&&i(s.current.getBoundingClientRect().width)})),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"score-display-container",ref:s,children:[(0,r.jsxs)("div",{className:"score-item control-text black ".concat("black"==u?"turn":""),children:[(0,r.jsx)("div",{className:"score-item-icon",children:" "}),(0,r.jsxs)("div",{children:["Black: ",n]})]}),(0,r.jsxs)("div",{className:"score-item control-text white ".concat("white"==u?"turn":""),children:[(0,r.jsx)("div",{className:"score-item-icon",children:" "}),(0,r.jsxs)("div",{children:["White: ",a]})]})]})})}function y(e){var t=(0,o.useRef)(null),n=a({ref:t}),s=(0,o.useState)(),c=s[0],i=s[1],l=e.gamestate,f=e.onMove,d=e.onNewGame,v=e.onPass,m=e.muted,p=e.toggleMute,w=(l.state,(0,o.useState)(!1)),g=w[0],y=w[1],b=(0,o.useState)(!1),j=b[0],x=b[1];(0,o.useEffect)((function(){if(n.width&&n.height){var e=n?Math.min(n.width,n.height):0;i(.9*e)}}),[n]);return(0,r.jsxs)("div",{className:"game-table",ref:t,children:[(0,r.jsx)("div",{className:"spacer"}),(0,r.jsx)(h,{gamestate:l,setShouldShowLastMove:function(){y((function(e){return!e}))},setShouldShowValidMoves:function(){x((function(e){return!e}))},shouldShowLastMove:g,shouldShowValidMoves:j,side:c,newGame:d,pass:v,muted:m,toggleMute:p}),(0,r.jsx)("div",{className:"board-wrapper",children:(0,r.jsx)(u,{gamestate:l,side:null!==c&&void 0!==c?c:0,shouldShowLastMove:g,shouldShowValidMoves:j,onMove:f})}),(0,r.jsx)("div",{className:"spacer"})]})}var b=n(6610),j=n(5991);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?x(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=n(6156);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}var R={burp1:"/Burp 1.wav",fart1:"/Fart 1.wav",fart2:"/Fart 2.wav",fart3:"/Fart 3.wav",fart4:"/Fart 4.wav",fart5:"/Fart 5.wav",fart6:"/Fart 6.wav",fart7:"/Fart 7.wav",fart8:"/Fart 8.wav",fart9:"/Fart 9.wav",fart10:"/Fart 10.wav"},E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(n,e);var t=O(n);function n(e){var r;return(0,b.Z)(this,n),r=t.call(this,e),(0,C.Z)(x(r),"sounds",void 0),r.sounds=(0,o.createRef)(),r}return(0,j.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=e.gameState.lastMove,n=this.props.gameState.lastMove;this.didMove(t,n)&&this.playMove()}},{key:"didMove",value:function(e,t){return!(!t||!t.length)&&(!e||!e.length||t[0].s!==e[0].s)}},{key:"playMove",value:function(){var e=Object.keys(R),t=Math.floor(Math.random()*e.length);this.play(e[t])}},{key:"play",value:function(e){var t;if(!this.props.muted){var n=null===(t=this.sounds.current)||void 0===t?void 0:t.querySelector("#".concat(e));n&&(n.currentTime=0,n.play())}}},{key:"render",value:function(){return(0,r.jsx)("div",{ref:this.sounds,style:{display:"none"},children:Object.entries(R).map((function(e,t){var n=(0,l.Z)(e,2),o=n[0],a=n[1];return(0,r.jsx)("audio",{id:o,src:a},t)}))})}}]),n}(o.Component);function L(e){var t=e.gameState.lastMove;return(0,o.useEffect)((function(){if(t){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t]),null}var P=n(4991),F=n(709),_=n(7675);function V(){var e=(0,P.G$)(),t=(0,F.QV)().muted,n=(0,_.I0)(),a=(0,o.useCallback)((function(){return n((0,P.wo)())}),[n]),s=(0,o.useCallback)((function(e,t){return n((0,P.pB)({r:e,c:t}))}),[n]),c=(0,o.useCallback)((function(){return n((0,P.Xc)())}),[n]),i=(0,o.useCallback)((function(){return n((0,F.$t)())}),[n]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(L,{gameState:e}),(0,r.jsx)(y,{gamestate:e,onNewGame:a,onMove:s,onPass:c,muted:t,toggleMute:i}),(0,r.jsx)(E,{gameState:e,muted:t})]})}},4405:function(e,t,n){"use strict";n.d(t,{w_:function(){return u}});var r=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(o),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function i(e){return e&&e.map((function(e,t){return r.createElement(e.tag,s({key:t},e.attr),i(e.child))}))}function u(e){return function(t){return r.createElement(l,s({attr:s({},e.attr)},t),i(e.child))}}function l(e){var t=function(t){var n,o=e.attr,a=e.size,i=e.title,u=c(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:n,style:s(s({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(o)}}}]);